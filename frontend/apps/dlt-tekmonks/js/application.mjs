import{router}from"/framework/js/router.mjs";import{session}from"/framework/js/session.mjs";import{securityguard}from"/framework/js/securityguard.mjs";const init=async r=>{window.APP_CONSTANTS=(await import("./constants.mjs")).APP_CONSTANTS,window.LOG=(await import("/framework/js/log.mjs")).LOG,session.get($$.MONKSHU_CONSTANTS.LANG_ID)||session.set($$.MONKSHU_CONSTANTS.LANG_ID,"en"),securityguard.setPermissionsMap(APP_CONSTANTS.PERMISSIONS_MAP),securityguard.setCurrentRole(securityguard.getCurrentRole()||APP_CONSTANTS.GUEST_ROLE),window.webscrolls_env={}},main=async r=>{try{await router.loadPage(window.location.href==APP_CONSTANTS.INDEX_HTML||router.decodeURL(window.location.href)==APP_CONSTANTS.INDEX_HTML?APP_CONSTANTS.MAIN_HTML:window.location.href)}catch(r){router.loadPage(APP_CONSTANTS.ERROR_HTML,{error:r,stack:r.stack||(new Error).stack})}};export const application={init:init,main:main};